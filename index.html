<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Doom-like Web Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
    margin: 0;
    background: #0b0b0f;
    color: #fff;
    font-family: monospace;
    overflow: hidden;
}
#ui {
    position: fixed;
    top: 10px;
    left: 10px;
    font-size: 16px;
}
canvas {
    display: block;
}
</style>
</head>
<body>

<div id="ui">Kills: <span id="kills">0</span></div>
<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
canvas.width = innerWidth;
canvas.height = innerHeight;

const player = {
    x: canvas.width / 2,
    y: canvas.height / 2,
    speed: 4
};

let keys = {};
let bullets = [];
let enemies = [];
let kills = 0;

document.addEventListener("keydown", e => keys[e.key.toLowerCase()] = true);
document.addEventListener("keyup", e => keys[e.key.toLowerCase()] = false);

canvas.addEventListener("click", e => {
    const angle = Math.atan2(e.clientY - player.y, e.clientX - player.x);
    bullets.push({
        x: player.x,
        y: player.y,
        dx: Math.cos(angle) * 8,
        dy: Math.sin(angle) * 8
    });
});

function spawnEnemy() {
    const edge = Math.floor(Math.random() * 4);
    let x, y;
    if (edge === 0) { x = 0; y = Math.random() * canvas.height; }
    if (edge === 1) { x = canvas.width; y = Math.random() * canvas.height; }
    if (edge === 2) { x = Math.random() * canvas.width; y = 0; }
    if (edge === 3) { x = Math.random() * canvas.width; y = canvas.height; }

    enemies.push({ x, y, speed: 1.5 });
}

setInterval(spawnEnemy, 1000);

function update() {
    if (keys["w"]) player.y -= player.speed;
    if (keys["s"]) player.y += player.speed;
    if (keys["a"]) player.x -= player.speed;
    if (keys["d"]) player.x += player.speed;

    bullets.forEach(b => {
        b.x += b.dx;
        b.y += b.dy;
    });

    enemies.forEach(e => {
        const angle = Math.atan2(player.y - e.y, player.x - e.x);
        e.x += Math.cos(angle) * e.speed;
        e.y += Math.sin(angle) * e.speed;
    });

    bullets.forEach((b, bi) => {
        enemies.forEach((e, ei) => {
            const dist = Math.hypot(b.x - e.x, b.y - e.y);
            if (dist < 15) {
                bullets.splice(bi, 1);
                enemies.splice(ei, 1);
                kills++;
                document.getElementById("kills").textContent = kills;
            }
        });
    });
}

function draw() {
    ctx.fillStyle = "#0b0b0f";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    ctx.fillStyle = "#7c6cff";
    ctx.beginPath();
    ctx.arc(player.x, player.y, 10, 0, Math.PI * 2);
    ctx.fill();

    ctx.fillStyle = "#fff";
    bullets.forEach(b => {
        ctx.fillRect(b.x, b.y, 4, 4);
    });

    ctx.fillStyle = "#ff3b3b";
    enemies.forEach(e => {
        ctx.beginPath();
        ctx.arc(e.x, e.y, 10, 0, Math.PI * 2);
        ctx.fill();
    });
}

function loop() {
    update();
    draw();
    requestAnimationFrame(loop);
}

loop();
</script>

</body>
</html>
